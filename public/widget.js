var ReqCheck=function(){"use strict";var e=(e,t,n)=>new Promise((o,i)=>{var r=e=>{try{l(n.next(e))}catch(t){i(t)}},s=e=>{try{l(n.throw(e))}catch(t){i(t)}},l=e=>e.done?o(e.value):Promise.resolve(e.value).then(r,s);l((n=n.apply(e,t)).next())});const t="undefined"!=typeof window?`${window.location.protocol}//${window.location.host}`:"";function n(n,o,i){return e(this,null,function*(){const e=window.location.origin,r=new URLSearchParams({companyId:n,jobId:o,origin:e});i&&r.append("testMode","true");return(yield fetch(`${t}/api/v1/widget/validate?${r.toString()}`)).json()})}function o(n,o,i){return e(this,null,function*(){const e=new URLSearchParams({companyId:n,jobId:o});i&&e.append("email",i);const r=yield fetch(`${t}/api/v1/widget/questions?${e.toString()}`);if(!r.ok)throw new Error(`Failed to get questions: ${r.statusText}`);return r.json()})}function i(n,o,i,r){return e(this,null,function*(){const e=yield fetch(`${t}/api/v1/widget/attempts/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyId:n,jobId:o,email:i,testMode:r||!1})});if(!e.ok)throw new Error(`Failed to start attempt: ${e.statusText}`);return e.json()})}function r(n,o,i,r){return e(this,null,function*(){const e=yield fetch(`${t}/api/v1/widget/attempts/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionToken:n,attemptId:o,answers:i,timeTakenSeconds:r})});if(!e.ok)throw new Error(`Failed to submit attempt: ${e.statusText}`);return e.json()})}function s(n,o,i){return e(this,null,function*(){const e=new URLSearchParams({companyId:n,jobId:o,email:i}),r=yield fetch(`${t}/api/v1/widget/attempts/current?${e.toString()}`);if(!r.ok)throw new Error(`Failed to get current attempt: ${r.statusText}`);return r.json()})}function l(n,o,i,r){return e(this,null,function*(){const e=yield fetch(`${t}/api/v1/widget/attempts/progress`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionToken:n,attemptId:o,questionId:i,answer:r})});if(!e.ok)throw new Error(`Failed to save progress: ${e.statusText}`);return e.json()})}const c="reqcheck_";function a(e,t){try{const n=`${c}email_${e}_${t}`,o=localStorage.getItem(n);return o?JSON.parse(o).email:null}catch(n){return null}}function d(e,t,n){try{const o=`${c}email_${e}_${t}`;localStorage.setItem(o,JSON.stringify({email:n,timestamp:Date.now()}))}catch(o){}}function u(e,t,n){try{const o=`${c}status_${e}_${t}_${n.toLowerCase()}`,i=localStorage.getItem(o);return i?JSON.parse(i):null}catch(o){return null}}function m(e,t,n,o,i){try{const r=`${c}status_${e}_${t}_${n.toLowerCase()}`;localStorage.setItem(r,JSON.stringify({passed:o,score:i,timestamp:Date.now()}))}catch(r){}}function p(n,o,i){return e(this,null,function*(){if(!(n&&n.includes("@")&&i&&o))return{showCheckmark:!1,showCTA:!1,showWarning:!1};const r=n.toLowerCase().trim(),s=u(o,i,r);if(s){const e=Date.now()-s.timestamp,t=864e5;if(s.passed&&e<t)return{showCheckmark:!0,showCTA:!1,showWarning:!1};if(!s.passed&&e<t){const n=Math.ceil((t-e)/36e5);return{showCheckmark:!1,showCTA:!1,showWarning:!0,warningMessage:`Try again in ${n} hour${1!==n?"s":""}`}}}try{const n=yield function(n,o,i){return e(this,null,function*(){const e=new URLSearchParams({companyId:n,jobId:o,email:i}),r=yield fetch(`${t}/api/v1/widget/attempts/status?${e.toString()}`);if(!r.ok)throw new Error(`Failed to check status: ${r.statusText}`);return r.json()})}(o,i,r);if(m(o,i,r,n.passed,n.score),n.verified&&n.passed)return{showCheckmark:!0,showCTA:!1,showWarning:!1};if(n.verified&&!n.passed&&n.completedAt){const e=new Date(n.completedAt).getTime(),t=Date.now()-e,o=864e5;if(t<o){const e=Math.ceil((o-t)/36e5);return{showCheckmark:!1,showCTA:!1,showWarning:!0,warningMessage:`Try again in ${e} hour${1!==e?"s":""}`}}}return{showCheckmark:!1,showCTA:!0,showWarning:!1,ctaText:"Start Verification"}}catch(l){return{showCheckmark:!1,showCTA:!0,showWarning:!1,ctaText:"Start Verification"}}})}function h(e,t){const n=document.createElement("div");if(n.className="reqcheck-email-indicator",n.style.cssText="\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    margin-top: 0.5rem;\n    font-size: 0.875rem;\n  ",e.showCheckmark){const e=document.createElement("span");e.textContent="✓",e.style.cssText="\n      color: #10b981;\n      font-weight: bold;\n      font-size: 1.25rem;\n    ";const t=document.createElement("span");return t.textContent="Verified",t.style.cssText="color: #10b981;",n.appendChild(e),n.appendChild(t),n}if(e.showWarning){const t=document.createElement("span");t.textContent="⚠",t.style.cssText="\n      color: #f59e0b;\n      font-size: 1.25rem;\n    ";const o=document.createElement("span");return o.textContent=e.warningMessage||"Try again later",o.style.cssText="color: #f59e0b;",n.appendChild(t),n.appendChild(o),n}if(e.showCTA){const o=document.createElement("button");return o.textContent=e.ctaText||"Start Verification",o.type="button",o.style.cssText="\n      padding: 0.5rem 1rem;\n      background: #4f46e5;\n      color: white;\n      border: none;\n      border-radius: 4px;\n      cursor: pointer;\n      font-size: 0.875rem;\n      font-weight: 500;\n    ",o.onclick=e=>{e.preventDefault(),t()},n.appendChild(o),n}return null}function f(e){const t=e.querySelector(".reqcheck-overlay");t&&t.remove()}function g(e,t,n,o,i,r){const s=e.querySelector(".reqcheck-overlay");if(!s)return;const l=(e,t)=>(null==i?void 0:i[e])||t,c=s.querySelector("div");if(!c)return;c.innerHTML="";const a=document.createElement("div");a.style.cssText="\n    font-size: 3rem;\n    margin-bottom: 1rem;\n  ",a.textContent="✗",c.appendChild(a);const d=document.createElement("h3");d.textContent="Verification Failed",d.style.cssText="\n    margin: 0 0 0.75rem 0;\n    font-size: 1.5rem;\n    font-weight: 600;\n    color: #dc2626;\n  ",c.appendChild(d);const u=document.createElement("p");if(u.textContent=`Score: ${t}% (Required: ${n}%)`,u.style.cssText=`\n    margin: 0 0 0.5rem 0;\n    color: ${l("fontColor","#6b7280")};\n    opacity: 0.8;\n    font-size: 0.875rem;\n  `,c.appendChild(u),null!==o&&o>0){const e=document.createElement("p");e.textContent=`You can try again in ${o} hour${1!==o?"s":""}.`,e.style.cssText=`\n      margin: 0;\n      color: ${l("fontColor","#6b7280")};\n      opacity: 0.7;\n      font-size: 0.875rem;\n    `,c.appendChild(e)}else{const e=document.createElement("p");e.textContent="You can try again in 24 hours.",e.style.cssText=`\n      margin: 0;\n      color: ${l("fontColor","#6b7280")};\n      opacity: 0.7;\n      font-size: 0.875rem;\n    `,c.appendChild(e)}}function y(e){const t=document.createElement("div");t.style.cssText="line-height: 1.6;";const n=/```(\w+)?\s*\n?([\s\S]*?)```/g,o=[];let i,r=0;for(n.lastIndex=0;null!==(i=n.exec(e));){if(i.index>r){const t=e.slice(r,i.index);t.trim()&&o.push({type:"text",content:t})}let t=i[2]||"";t=t.replace(/^\n+/,""),t=t.replace(/\n+$/,""),o.push({type:"code",content:t,language:i[1]||void 0}),r=i.index+i[0].length}if(r<e.length){const t=e.slice(r);t.trim()&&o.push({type:"text",content:t})}return 0===o.length&&o.push({type:"text",content:e}),o.forEach(e=>{if("code"===e.type){const n=document.createElement("div");n.style.cssText="\n        background: #f3f4f6;\n        border: 1px solid #e5e7eb;\n        border-radius: 6px;\n        padding: 1rem;\n        margin: 0.5rem 0;\n        overflow-x: auto;\n      ";const o=document.createElement("pre");o.style.cssText="\n        margin: 0;\n        font-family: monospace;\n        font-size: 0.875rem;\n        white-space: pre;\n        color: #1f2937;\n      ";const i=document.createElement("code");i.textContent=e.content,i.style.cssText="color: #1f2937;",o.appendChild(i),n.appendChild(o),t.appendChild(n)}else!function(e,t){const n=e.split("\n");let o=!1,i=null;for(const r of n){const e=r.match(/^[\s]*[-*]\s+(.+)$/),s=r.match(/^[\s]*\d+\.\s+(.+)$/);if(e||s){o||(o=!0,i=e?document.createElement("ul"):document.createElement("ol"),i.style.cssText="\n          margin: 0.5rem 0;\n          padding-left: 1.5rem;\n          color: #1f2937;\n        ",t.appendChild(i));const n=document.createElement("li");n.style.cssText="margin: 0.25rem 0; color: #1f2937;",b((null==e?void 0:e[1])||(null==s?void 0:s[1])||"",n),i.appendChild(n)}else if(o&&(o=!1,i=null),r.trim()){const e=document.createElement("p");e.style.cssText="margin: 0.5rem 0; color: #1f2937;",b(r,e),t.appendChild(e)}else if(n.length>1){const e=document.createElement("br");t.appendChild(e)}}}(e.content,t)}),t}function b(e,t){const n=[{regex:/`([^`]+)`/g,tag:"code"},{regex:/\*\*([^*]+)\*\*/g,tag:"strong"},{regex:/__([^_]+)__/g,tag:"strong"},{regex:/\*([^*]+)\*/g,tag:"em"},{regex:/_([^_]+)_/g,tag:"em"}];let o=0;const i=[];for(let r=0;r<n.length;r++){const t=n[r],o=new RegExp(t.regex.source,"g");let s;for(;null!==(s=o.exec(e));){if(!s[1])continue;i.some(e=>s.index>=e.index&&s.index<e.index+e.length||e.index>=s.index&&e.index<s.index+s[0].length)||i.push({index:s.index,length:s[0].length,tag:t.tag,content:s[1]})}}if(i.sort((e,t)=>e.index-t.index),i.length>0){for(const n of i){if(n.index>o){const i=e.slice(o,n.index);i&&t.appendChild(document.createTextNode(i))}const i=document.createElement(n.tag);"code"===n.tag?i.style.cssText="\n          background: #f3f4f6;\n          padding: 0.125rem 0.375rem;\n          border-radius: 4px;\n          font-family: monospace;\n          font-size: 0.875em;\n          color: #1f2937;\n        ":i.style.cssText="color: #1f2937;",i.textContent=n.content,t.appendChild(i),o=n.index+n.length}if(o<e.length){const n=e.slice(o);n&&t.appendChild(document.createTextNode(n))}}else t.appendChild(document.createTextNode(e))}function x(e,t,n){const o=(e,n)=>(null==t?void 0:t[e])||n,i=document.createElement("div");i.className="reqcheck-modal",i.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.8);\n    backdrop-filter: blur(8px);\n    -webkit-backdrop-filter: blur(8px);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 10000;\n  ",i.onclick=e=>{e.target===i&&e.stopPropagation()};const r=document.createElement("div");if(r.style.cssText=`\n    background: ${o("backgroundColor","white")};\n    border-radius: 12px;\n    max-width: 700px;\n    width: 90%;\n    max-height: 90vh;\n    display: flex;\n    flex-direction: column;\n    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);\n    position: relative;\n  `,r.onclick=e=>{e.stopPropagation()},n){const e=document.createElement("div");e.textContent="TEST MODE",e.style.cssText="\n      position: absolute;\n      top: -30px;\n      left: 50%;\n      transform: translateX(-50%);\n      background: #f59e0b;\n      color: white;\n      padding: 0.375rem 1.5rem;\n      border-top-left-radius: 8px;\n      border-top-right-radius: 8px;\n      font-size: 0.75rem;\n      font-weight: 600;\n      text-transform: uppercase;\n      letter-spacing: 0.05em;\n      z-index: 11;\n      box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.15);\n      white-space: nowrap;\n    ",r.appendChild(e)}const s=document.createElement("button");s.innerHTML="×",s.setAttribute("aria-label","Close");const l=o("fontColor","#6b7280");s.style.cssText=`\n    position: absolute;\n    top: 1rem;\n    right: 1rem;\n    background: transparent;\n    border: none;\n    font-size: 2rem;\n    color: ${l};\n    opacity: 0.7;\n    cursor: pointer;\n    width: 2.5rem;\n    height: 2.5rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 6px;\n    transition: all 0.2s;\n    z-index: 10;\n    line-height: 1;\n  `,s.onmouseenter=()=>{s.style.background="#f3f4f6",s.style.opacity="1"},s.onmouseleave=()=>{s.style.background="transparent",s.style.opacity="0.7"},s.onclick=t=>{t.preventDefault(),t.stopPropagation(),e(null)};const c=document.createElement("div");c.className="reqcheck-modal-content",c.style.cssText="\n    flex: 1;\n    overflow-y: auto;\n    position: relative;\n  ";const a=document.createElement("div");a.style.cssText="\n    padding: 1rem 2rem;\n    border-top: 1px solid #e5e7eb;\n    text-align: center;\n    background: #f9fafb;\n    border-bottom-left-radius: 12px;\n    border-bottom-right-radius: 12px;\n  ";const d=document.createElement("p");return d.textContent="Powered by reqCHECK",d.style.cssText=`\n    margin: 0;\n    font-size: 0.75rem;\n    color: ${o("fontColor","#9ca3af")};\n    opacity: 0.7;\n    font-weight: 500;\n  `,a.appendChild(d),r.appendChild(s),r.appendChild(c),r.appendChild(a),i.appendChild(r),i}function v(e,t,n){const o=(e,t)=>(null==n?void 0:n[e])||t;e.innerHTML="";const i=document.createElement("div");i.style.cssText="\n    padding: 3rem 2rem;\n  ";const r=document.createElement("h2");r.textContent="Enter Your Email",r.style.cssText=`\n    margin: 0 0 0.5rem 0;\n    font-size: 1.75rem;\n    font-weight: 600;\n    color: ${o("fontColor","#1f2937")};\n    text-align: center;\n  `;const s=document.createElement("p");s.textContent="We'll use this to track your verification progress.",s.style.cssText=`\n    margin: 0 0 2rem 0;\n    color: ${o("fontColor","#6b7280")};\n    text-align: center;\n    font-size: 0.875rem;\n    opacity: 0.8;\n  `;const l=document.createElement("form");l.style.cssText="\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n  ",l.onsubmit=e=>{e.preventDefault();const n=c.value.trim();n&&n.includes("@")&&t(n)};const c=document.createElement("input");c.type="email",c.placeholder="candidate@example.com",c.required=!0;const a=o("buttonColor","#000000");c.style.cssText=`\n    padding: 0.75rem;\n    border: 1px solid #d1d5db;\n    border-radius: 6px;\n    font-size: 1rem;\n    outline: none;\n    transition: border-color 0.2s;\n    background: ${o("backgroundColor","white")};\n    color: ${o("fontColor","#1f2937")};\n  `,c.onfocus=()=>{c.style.borderColor=a},c.onblur=()=>{c.style.borderColor="#d1d5db"};const d=document.createElement("button");d.type="submit",d.textContent="Continue",d.style.cssText="\n    padding: 0.75rem;\n    background: #000000;\n    color: white;\n    border: none;\n    border-radius: 6px;\n    font-size: 1rem;\n    font-weight: 500;\n    cursor: pointer;\n    transition: background 0.2s;\n  ",d.onmouseenter=()=>{d.style.background="#1f2937"},d.onmouseleave=()=>{d.style.background="#000000"},l.appendChild(c),l.appendChild(d),i.appendChild(r),i.appendChild(s),i.appendChild(l),e.appendChild(i)}function C(t,n,o,i,s,c=0,a=[],d,u,m,p){const h=(e,t)=>(null==m?void 0:m[e])||t;let f=c;const g=[...a],b=Date.now();let x=null;const v=()=>e(this,null,function*(){if(null!==x&&(clearInterval(x),x=null),f>=n.length)return void(yield w());const o=n[f],r=f+1,c=n.length;t.innerHTML="";const a=document.createElement("div");if(a.style.cssText="\n      padding: 2rem;\n    ",o.skillName){const e=document.createElement("div");e.style.cssText=`\n        display: inline-block;\n        padding: 0.375rem 0.75rem;\n        background: #f3f4f6;\n        border-radius: 6px;\n        font-size: 0.875rem;\n        font-weight: 500;\n        color: ${h("fontColor","#6b7280")};\n        opacity: 0.8;\n        margin-bottom: 1rem;\n      `,e.textContent=o.skillName,a.appendChild(e)}const d=document.createElement("div");d.style.cssText="\n      margin-bottom: 1.5rem;\n    ";const u=document.createElement("div");u.style.cssText="\n      height: 4px;\n      background: #e5e7eb;\n      border-radius: 2px;\n      overflow: hidden;\n      margin-bottom: 0.5rem;\n    ";const m=document.createElement("div"),b=h("accentColor","#000000");m.style.cssText=`\n      height: 100%;\n      background: ${b};\n      width: ${(f+1)/c*100}%;\n      transition: width 0.3s;\n    `,u.appendChild(m);const C=document.createElement("div");C.style.cssText=`\n      font-size: 0.875rem;\n      color: ${h("fontColor","#6b7280")};\n      opacity: 0.8;\n      text-align: center;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    `;const k=document.createElement("span");k.textContent=`Question ${r} of ${c}`,C.appendChild(k);let E=null;if(o.timeLimitSeconds&&o.timeLimitSeconds>0){E=document.createElement("span"),E.style.cssText=`\n        font-weight: 600;\n        color: ${b};\n        font-size: 0.875rem;\n      `;let e=o.timeLimitSeconds;E.textContent=`${e}s`,x=window.setInterval(()=>{if(e--,E&&(E.textContent=`${e}s`,e<=10?E.style.color="#dc2626":e<=30&&(E.style.color="#f59e0b"),e<=0)){null!==x&&(clearInterval(x),x=null);const e=g.findIndex(e=>e.questionId===o.id),t="fill_blank_blocks"===o.type?[]:"";e>=0?g[e]={questionId:o.id,answer:t}:g.push({questionId:o.id,answer:t}),p||l(i,s,o.id,t).catch(e=>{}),f++,v()}},1e3),C.appendChild(E)}d.appendChild(u),d.appendChild(C);const T=document.createElement("div");T.style.cssText="\n      margin-bottom: 2rem;\n    ";const q=document.createElement("div");q.style.cssText=`\n      margin: 0 0 1.5rem 0;\n      font-size: 1.25rem;\n      font-weight: 600;\n      color: ${h("fontColor","#1f2937")};\n    `;const $=y(o.prompt);if(q.appendChild($),T.appendChild(q),o.imageUrl){const e=document.createElement("div");e.style.cssText="\n        margin: 0 0 1.5rem 0;\n        width: 100%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      ";const t=document.createElement("img");t.src=o.imageUrl,t.alt=o.imageAltText||"Question image",t.style.cssText="\n        max-width: 100%;\n        height: 200px;\n        object-fit: contain;\n        border-radius: 8px;\n        border: 1px solid #e5e7eb;\n        background: #f9fafb;\n      ",e.appendChild(t),T.appendChild(e)}const S=document.createElement("button");S.type="button",S.textContent=f===n.length-1?"Submit Quiz":"Next Question";const I=h("buttonColor","#000000"),M=h("buttonTextColor","white"),z=()=>{let e=!1;if("multiple_choice"===o.type){e=!!document.querySelector(`input[name="question-${o.id}"]:checked`)}else if("fill_blank_blocks"===o.type){const t=(o.config.segments||[]).filter(e=>"blank"===e.type).length,n=T.getAnswer;if(n){const o=n();e=Array.isArray(o)&&o.length===t}}S.disabled=!e,S.style.cssText=e?`\n          width: 100%;\n          padding: 0.75rem;\n          background: ${I};\n          color: ${M};\n          border: none;\n          border-radius: 6px;\n          font-size: 1rem;\n          font-weight: 500;\n          cursor: pointer;\n          transition: background 0.2s;\n        `:"\n          width: 100%;\n          padding: 0.75rem;\n          background: #d1d5db;\n          color: #9ca3af;\n          border: none;\n          border-radius: 6px;\n          font-size: 1rem;\n          font-weight: 500;\n          cursor: not-allowed;\n          transition: background 0.2s;\n          opacity: 0.6;\n        "};if("multiple_choice"===o.type){const e=o.config.options||[],t=g.find(e=>e.questionId===o.id),n=[],i=h("accentColor","#000000");e.forEach(e=>{const r=document.createElement("label"),s=t&&t.answer===e;r.style.cssText=`\n          display: block;\n          padding: 1rem;\n          margin: 0.5rem 0;\n          border: 2px solid ${s?i:"#e5e7eb"};\n          border-radius: 8px;\n          cursor: pointer;\n          transition: all 0.2s;\n          color: ${h("fontColor","#1f2937")};\n          background: ${s?"#f9fafb":"transparent"};\n        `;const l=document.createElement("input");l.type="radio",l.name=`question-${o.id}`,l.value=e,s&&(l.checked=!0),l.onchange=()=>{n.forEach(e=>{e.style.borderColor="#e5e7eb",e.style.background="transparent"}),r.style.borderColor=i,r.style.background="#f9fafb",z()},r.setAttribute("for",`question-${o.id}-${e}`),l.id=`question-${o.id}-${e}`,r.appendChild(l),r.appendChild(document.createTextNode(` ${e}`)),n.push(r),T.appendChild(r)})}else if("fill_blank_blocks"===o.type){const e=o.config,t=e.segments||[],n=e.shuffledOptions||[...e.correctAnswer||[],...e.extraBlanks||[]],i=g.find(e=>e.questionId===o.id);let r=[];i&&Array.isArray(i.answer)&&(r=[...i.answer]);const s=t.filter(e=>"blank"===e.type).length;for(;r.length<s;)r.push(null);r=r.slice(0,s);const l=document.createElement("div");l.style.cssText="\n        background: #f3f4f6;\n        border: 1px solid #e5e7eb;\n        border-radius: 8px;\n        padding: 1rem;\n        margin-bottom: 1.5rem;\n        overflow-x: auto;\n      ";const c=document.createElement("pre");c.style.cssText="\n        margin: 0;\n        font-family: monospace;\n        font-size: 0.875rem;\n        white-space: pre;\n        color: #1f2937;\n        line-height: 1.6;\n      ";const a=document.createElement("code");let d=0;t.forEach((e,t)=>{if("text"===e.type){const t=document.createElement("span");t.textContent=e.text,a.appendChild(t)}else if("blank"===e.type){const e=document.createElement("span"),t=d++,n=r[t];n?(e.style.cssText="\n              display: inline-block;\n              width: min-content;\n              min-width: 60px;\n              height: 24px;\n              margin: 0 4px;\n              padding: 2px 8px;\n              border: 2px solid #000000;\n              border-radius: 4px;\n              background: #ffffff;\n              cursor: pointer;\n              transition: all 0.2s;\n              vertical-align: middle;\n              line-height: 20px;\n              font-size: 0.875rem;\n              color: #1f2937;\n              white-space: nowrap;\n            ",e.textContent=n):(e.style.cssText="\n              display: inline-block;\n              width: 80px;\n              height: 24px;\n              margin: 0 4px;\n              padding: 2px 8px;\n              border: 2px dashed #9ca3af;\n              border-radius: 4px;\n              background: #f9fafb;\n              cursor: pointer;\n              transition: all 0.2s;\n              vertical-align: middle;\n              line-height: 20px;\n              font-size: 0.875rem;\n              color: #9ca3af;\n            ",e.textContent="____"),e.onclick=()=>{n&&(r[t]=null,p())},e.onmouseenter=()=>{n&&(e.style.background="#fee2e2",e.style.borderColor="#dc2626")},e.onmouseleave=()=>{n&&(e.style.background="#ffffff",e.style.borderColor="#000000")},a.appendChild(e)}else if("newline"===e.type)a.appendChild(document.createElement("br"));else if("tab"===e.type){const e=document.createElement("span");e.textContent="\t",a.appendChild(e)}}),c.appendChild(a),l.appendChild(c),T.appendChild(l);const u=document.createElement("p");u.textContent="Click an option to fill the earliest blank:",u.style.cssText="\n        margin: 0 0 0.75rem 0;\n        font-size: 0.875rem;\n        font-weight: 500;\n        color: #1f2937;\n      ",T.appendChild(u);const m=document.createElement("div");m.style.cssText="\n        display: flex;\n        flex-wrap: wrap;\n        gap: 0.5rem;\n        margin-bottom: 1rem;\n      ";const p=()=>{const e=new Map;r.forEach(t=>{null!==t&&e.set(t,(e.get(t)||0)+1)});const o=new Map;n.forEach(e=>{o.set(e,(o.get(e)||0)+1)});const i=n.filter(t=>(e.get(t)||0)<(o.get(t)||0));z(),a.innerHTML="",d=0,t.forEach(e=>{if("text"===e.type){const t=document.createElement("span");t.textContent=e.text,a.appendChild(t)}else if("blank"===e.type){const e=document.createElement("span"),t=d++,n=r[t];if(n){const t=h("accentColor","#000000");e.style.cssText=`\n                display: inline-block;\n                width: min-content;\n                min-width: 60px;\n                height: 24px;\n                margin: 0 4px;\n                padding: 2px 8px;\n                border: 2px solid ${t};\n                border-radius: 4px;\n                background: #ffffff;\n                cursor: pointer;\n                transition: all 0.2s;\n                vertical-align: middle;\n                line-height: 20px;\n                font-size: 0.875rem;\n                color: ${h("fontColor","#1f2937")};\n                white-space: nowrap;\n              `,e.textContent=n}else e.style.cssText="\n                display: inline-block;\n                width: 80px;\n                height: 24px;\n                margin: 0 4px;\n                padding: 2px 8px;\n                border: 2px dashed #9ca3af;\n                border-radius: 4px;\n                background: #f9fafb;\n                cursor: pointer;\n                transition: all 0.2s;\n                vertical-align: middle;\n                line-height: 20px;\n                font-size: 0.875rem;\n                color: #9ca3af;\n              ",e.textContent="____";e.onclick=()=>{n&&(r[t]=null,p())},e.onmouseenter=()=>{n&&(e.style.background="#fee2e2",e.style.borderColor="#dc2626")},e.onmouseleave=()=>{if(n){const t=h("accentColor","#000000");e.style.background="#ffffff",e.style.borderColor=t}},a.appendChild(e)}else if("newline"===e.type)a.appendChild(document.createElement("br"));else if("tab"===e.type){const e=document.createElement("span");e.textContent="\t",a.appendChild(e)}}),m.innerHTML="",i.forEach(e=>{const t=document.createElement("button");t.textContent=e,t.style.cssText="\n            padding: 0.5rem 0.75rem;\n            border: 1px solid #d1d5db;\n            border-radius: 6px;\n            background: white;\n            color: #1f2937;\n            font-size: 0.875rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.2s;\n          ",t.onmouseenter=()=>{const e=h("accentColor","#000000");t.style.background="#f3f4f6",t.style.borderColor=e},t.onmouseleave=()=>{t.style.background="white",t.style.borderColor="#d1d5db"},t.onclick=()=>{const t=r.findIndex(e=>null===e);-1!==t&&(r[t]=e,p())},m.appendChild(t)})};p(),T.appendChild(m),T.getAnswer=()=>r.filter(e=>null!==e)}z(),S.onmouseenter=()=>{S.disabled||(S.style.background="#000000"===I?"#1f2937":I)},S.onmouseleave=()=>{S.disabled||(S.style.background=I)},S.onclick=()=>e(this,null,function*(){if(S.disabled)return;let e="";if("multiple_choice"===o.type){const t=document.querySelector(`input[name="question-${o.id}"]:checked`);e=(null==t?void 0:t.value)||""}else if("fill_blank_blocks"===o.type){const t=T.getAnswer;e=t?t():[]}if("fill_blank_blocks"===o.type){const t=(o.config.segments||[]).filter(e=>"blank"===e.type).length;if(!Array.isArray(e)||e.length<t)return void alert(`Please fill all ${t} blanks`)}else if(!e||Array.isArray(e)&&0===e.length)return void alert("Please provide an answer");null!==x&&(clearInterval(x),x=null);const t=g.findIndex(e=>e.questionId===o.id);if(t>=0?g[t]={questionId:o.id,answer:e}:g.push({questionId:o.id,answer:e}),!p)try{yield l(i,s,o.id,e)}catch(n){}f++,v()}),a.appendChild(d),a.appendChild(T),a.appendChild(S),t.appendChild(a)}),C=(e,t)=>{var n,o;if("multiple_choice"===e.type){if("string"!=typeof t)return!1;const n=e.config,o=null==n?void 0:n.correctAnswer;return!!o&&o.trim().toLowerCase()===t.trim().toLowerCase()}if("fill_blank_blocks"===e.type){if(!Array.isArray(t))return!1;const i=e.config,r=null==i?void 0:i.correctAnswer;if(!Array.isArray(r))return!1;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++){if((null==(n=r[e])?void 0:n.trim().toLowerCase())!==(null==(o=t[e])?void 0:o.trim().toLowerCase()))return!1}return!0}return!1},w=()=>e(this,null,function*(){null!==x&&(clearInterval(x),x=null);try{const e=n.map(e=>{const t=g.find(t=>t.questionId===e.id),n=(null==t?void 0:t.answer)||("fill_blank_blocks"===e.type?[]:"");return{questionId:e.id,answer:n}});let l;if(p){let t=0;for(const o of e){const e=n.find(e=>e.id===o.questionId);e&&C(e,o.answer)&&t++}const i=n.length,r=i>0?Math.round(t/i*100):0;l={passed:r>=o,score:r,verificationToken:null}}else{const t=Math.floor((Date.now()-b)/1e3),n=yield r(i,s,e,t);l={passed:n.passed,score:n.score,verificationToken:n.verificationToken||null}}!function(e,t,n,o,i,r){const s=(e,t)=>(null==r?void 0:r[e])||t;e.innerHTML="";const l=document.createElement("div");l.style.cssText="\n    padding: 3rem 2rem;\n    text-align: center;\n  ";const c=document.createElement("div");c.style.cssText="\n    font-size: 4rem;\n    margin-bottom: 1.5rem;\n  ",c.textContent=t?"✓":"✗",l.appendChild(c);const a=s("accentColor","#000000"),d=t?a:"#dc2626",u="#dc2626",m=document.createElement("h2");m.style.cssText=`\n    font-size: 2rem;\n    font-weight: 700;\n    margin: 0 0 1rem 0;\n    color: ${t?d:u};\n  `,m.textContent=t?"Verification Passed!":"Verification Failed",l.appendChild(m);const p=document.createElement("p");p.style.cssText=`\n    font-size: 1.125rem;\n    color: ${s("fontColor","#6b7280")};\n    opacity: 0.8;\n    margin: 0 0 0.5rem 0;\n  `,p.textContent=`Score: ${n}%`,l.appendChild(p);const h=document.createElement("p");h.style.cssText=`\n    font-size: 0.875rem;\n    color: ${s("fontColor","#9ca3af")};\n    opacity: 0.7;\n    margin: 0 0 2rem 0;\n  `,h.textContent=`Required: ${o}%`,l.appendChild(h);const f=document.createElement("button");f.textContent=t?"Continue":"Close";const g=s("buttonColor","#000000"),y=s("buttonTextColor","white");f.style.cssText=`\n    background: ${t?"#000000"!==g?g:d:u};\n    color: ${y};\n    border: none;\n    padding: 0.75rem 2rem;\n    font-size: 1rem;\n    font-weight: 600;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all 0.2s;\n  `,f.onmouseenter=()=>{f.style.opacity="0.9",f.style.transform="scale(1.02)"},f.onmouseleave=()=>{f.style.opacity="1",f.style.transform="scale(1)"},f.onclick=e=>{e.preventDefault(),e.stopPropagation(),i()},l.appendChild(f),e.appendChild(l)}(t,l.passed,l.score,o,()=>{d({passed:l.passed,score:l.score,verificationToken:l.verificationToken||void 0})},m)}catch(e){alert(`Error submitting quiz: ${e.message}`)}});v()}const w=new class{constructor(){this.config=null,this.callbacks={},this.initialized=!1,this.protectedElements=new Map,this.protectSubmitHandlers=new Map,this.gateElements=new Map,this.widgetStyles=null,this.mutationObserver=null,this.processedElements=new WeakMap,this.rescanTimer=null,this.lastBodyContent=""}getStyle(e,t){var n;return(null==(n=this.widgetStyles)?void 0:n[e])||t}init(t){return e(this,arguments,function*(e,t={}){if(this.initialized)return this.config=e,this.callbacks=t,void(!1===e.autoInit||this.mutationObserver||(this.startMutationObserver(),this.autoInit()));this.config=e,this.callbacks=t,this.initialized=!0,!1!==e.autoInit&&this.autoInit()})}validateJob(t){return e(this,null,function*(){if(!this.config)return{canRender:!1};try{const e=yield n(this.config.companyId,t,this.config.testMode);return e.widgetStyles&&(this.widgetStyles=e.widgetStyles),{canRender:!0===e.canRender,config:e.config}}catch(e){return{canRender:!1}}})}hideWidget(){this.protectedElements.forEach((e,t)=>{f(t),this.protectedElements.delete(t)}),this.protectSubmitHandlers.forEach((e,t)=>{t.removeEventListener("submit",e),this.protectSubmitHandlers.delete(t)}),this.gateElements.forEach((e,t)=>{t.removeEventListener("click",e),this.gateElements.delete(t)})}processElement(t){return e(this,null,function*(){if(!this.config)return;const e=t.getAttribute("data-reqcheck-mode");if(!e)return;const n=t.getAttribute("data-reqcheck-job")||this.config.jobId;if(!n)return;const o=`${e}:${n}`,i=this.processedElements.get(t);if(i!==o)if(i&&i!==o&&this.cleanupElement(t),this.processedElements.set(t,o),"protect"===e&&t instanceof HTMLFormElement){if(!(yield this.validateJob(n)).canRender)return;yield this.attachToForm(t,n)}else if("gate"===e&&t instanceof HTMLElement){if(!(yield this.validateJob(n)).canRender)return;yield this.attachToElement(t,n)}else"inline"===e&&t instanceof HTMLElement&&(yield this.attachToInlineElement(t,n))})}autoInit(){return e(this,null,function*(){if(!this.config)return;"loading"===document.readyState&&(yield new Promise(e=>{"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>e()):e()})),this.attachEmailFields();const e=document.querySelectorAll("[data-reqcheck-mode]");for(const t of e)yield this.processElement(t);this.startMutationObserver()})}rescan(){return e(this,null,function*(){if(!this.config)return;this.attachEmailFields();const e=document.querySelectorAll("[data-reqcheck-mode]");for(const t of e)yield this.processElement(t)})}scheduleRescan(){this.rescanTimer&&clearTimeout(this.rescanTimer),this.rescanTimer=window.setTimeout(()=>{this.rescan().catch(e=>{})},100)}cleanupElement(e){if(this.protectedElements.has(e)&&(f(e),this.protectedElements.delete(e)),e instanceof HTMLFormElement){const t=this.protectSubmitHandlers.get(e);t&&(e.removeEventListener("submit",t),this.protectSubmitHandlers.delete(e))}const t=this.gateElements.get(e);t&&(e.removeEventListener("click",t),this.gateElements.delete(e))}startMutationObserver(){var e,t;if(!this.config)return;this.mutationObserver&&this.mutationObserver.disconnect(),this.lastBodyContent=(null==(t=null==(e=document.body)?void 0:e.innerHTML)?void 0:t.substring(0,1e3))||"",this.mutationObserver=new MutationObserver(e=>{var t,n;let o=!1;for(const r of e){for(const e of r.addedNodes)if(e.nodeType===Node.ELEMENT_NODE){const t=e;r.addedNodes.length>5&&(o=!0),t.hasAttribute("data-reqcheck-email-field")&&this.attachEmailFields(),t.hasAttribute("data-reqcheck-mode")&&this.processElement(t).catch(e=>{});const n=t.querySelectorAll("[data-reqcheck-mode]");for(const e of n)this.processElement(e).catch(e=>{});t.querySelectorAll("[data-reqcheck-email-field]").length>0&&this.attachEmailFields()}if("attributes"===r.type&&r.target instanceof HTMLElement){const e=r.target;"data-reqcheck-mode"===r.attributeName||"data-reqcheck-job"===r.attributeName?e.hasAttribute("data-reqcheck-mode")?this.processElement(e).catch(e=>{}):(this.cleanupElement(e),this.processedElements.delete(e)):"data-reqcheck-email-field"===r.attributeName&&e.hasAttribute("data-reqcheck-email-field")&&this.attachEmailFields()}}o&&this.scheduleRescan();const i=(null==(n=null==(t=document.body)?void 0:t.innerHTML)?void 0:n.substring(0,1e3))||"";i!==this.lastBodyContent&&(this.lastBodyContent=i,this.scheduleRescan())});const n=document.body||document.documentElement;this.mutationObserver.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-reqcheck-mode","data-reqcheck-job","data-reqcheck-email-field"]});const o=setInterval(()=>{var e,t;if(!this.config||!this.mutationObserver)return void clearInterval(o);const n=(null==(t=null==(e=document.body)?void 0:e.innerHTML)?void 0:t.substring(0,1e3))||"";n!==this.lastBodyContent&&(this.lastBodyContent=n,this.scheduleRescan())},500)}stopMutationObserver(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.rescanTimer&&(clearTimeout(this.rescanTimer),this.rescanTimer=null)}attachEmailFields(){if(!this.config)return;document.querySelectorAll("[data-reqcheck-email-field]").forEach(t=>{var n;const o=t.closest("form"),i=t.getAttribute("data-reqcheck-job")||(null==o?void 0:o.getAttribute("data-reqcheck-job"))||(null==(n=null==o?void 0:o.querySelector("[data-reqcheck-mode]"))?void 0:n.getAttribute("data-reqcheck-job"));i&&function(t,n,o,i){let r=null,s=null;const l=()=>e(this,null,function*(){const e=t.value.trim();if(r&&r.parentNode&&(r.parentNode.removeChild(r),r=null),!e||!e.includes("@"))return;const s=a(n,o);if(s&&s.toLowerCase()!==e.toLowerCase()){const s=h(yield p(e,n,o),()=>i(e));if(s){const e=t.parentElement;e&&(e.appendChild(s),r=s)}}else if(s){const s=u(n,o,e.toLowerCase());if(s){const n=Date.now()-s.timestamp,o=864e5;if(s.passed&&n<o){const n=h({showCheckmark:!0,showCTA:!1,showWarning:!1},()=>i(e));if(n){const e=t.parentElement;e&&(e.appendChild(n),r=n)}}}}else{const s=h(yield p(e,n,o),()=>i(e));if(s){const e=t.parentElement;e&&(e.appendChild(s),r=s)}}d(n,o,e)});t.addEventListener("blur",()=>{s&&clearTimeout(s),s=window.setTimeout(l,300)}),t.value&&l()}(t,this.config.companyId,i,e=>{const n=t.closest("form");n&&n.hasAttribute("data-reqcheck-mode")&&this.showProtectModal(n,i)})})}attachToForm(t,n){return e(this,null,function*(){var o,i;const r=yield this.validateJob(n);if(!r.canRender)return;null==(o=r.config)||o.passThreshold,f(t);const l=getComputedStyle(t);"static"===l.position&&(t.style.position="relative"),t.style.minHeight||"0px"!==l.minHeight||(t.style.minHeight="200px");const c=t.querySelector("[data-reqcheck-email-field]"),a=(null==c?void 0:c.value)||"";let d=!1;if(a)try{d="in_progress"===(yield s(this.config.companyId,n,a)).status}catch(h){}const u=function(e,t,n,o){const i=(e,t)=>(null==n?void 0:n[e])||t,r=document.createElement("div");r.className="reqcheck-overlay",r.style.cssText="\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.7);\n    backdrop-filter: blur(4px);\n    -webkit-backdrop-filter: blur(4px);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 50;\n    border-radius: inherit;\n  ";const s=document.createElement("div");if(s.style.cssText="\n    background: white;\n    padding: 2rem;\n    border-radius: 8px;\n    max-width: 400px;\n    width: 90%;\n    text-align: center;\n    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);\n    position: relative;\n  ",o){const e=document.createElement("div");e.textContent="TEST MODE",e.style.cssText="\n      position: absolute;\n      top: -30px;\n      left: 50%;\n      transform: translateX(-50%);\n      background: #f59e0b;\n      color: white;\n      padding: 0.375rem 1.5rem;\n      border-top-left-radius: 8px;\n      border-top-right-radius: 8px;\n      font-size: 0.75rem;\n      font-weight: 600;\n      text-transform: uppercase;\n      letter-spacing: 0.05em;\n      z-index: 51;\n      box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.15);\n      white-space: nowrap;\n    ",s.appendChild(e)}const l=document.createElement("h3");l.textContent="Verification Required",l.style.cssText=`\n    margin: 0 0 1rem 0;\n    font-size: 1.5rem;\n    font-weight: 600;\n    color: ${i("fontColor","#1f2937")};\n  `;const c=document.createElement("p");c.textContent=t?"Continue your verification to unlock this form.":"Complete reqCHECK verification to unlock this form.",c.style.cssText=`\n    margin: 0 0 1.5rem 0;\n    color: ${i("fontColor","#6b7280")};\n    opacity: 0.8;\n    font-size: 0.875rem;\n  `;const a=document.createElement("button");a.textContent=t?"Continue Verification":"Start Verification";const d=i("buttonColor","#000000"),u=i("buttonTextColor","white");return a.style.cssText=`\n    padding: 0.75rem 1.5rem;\n    background: ${d};\n    color: ${u};\n    border: none;\n    border-radius: 6px;\n    font-size: 1rem;\n    font-weight: 500;\n    cursor: pointer;\n    transition: background 0.2s;\n  `,a.onmouseenter=()=>{a.style.background="#000000"===d?"#1f2937":d},a.onmouseleave=()=>{a.style.background=d},a.onclick=t=>{t.preventDefault(),t.stopPropagation(),e()},s.appendChild(l),s.appendChild(c),s.appendChild(a),r.appendChild(s),r}(()=>{this.showProtectModal(t,n)},d,this.widgetStyles||void 0,null==(i=this.config)?void 0:i.testMode);t.appendChild(u),this.protectedElements.set(t,!0);const m=this.protectSubmitHandlers.get(t);m&&(t.removeEventListener("submit",m),this.protectSubmitHandlers.delete(t));const p=o=>e(this,null,function*(){o.preventDefault(),this.showProtectModal(t,n)});t.addEventListener("submit",p),this.protectSubmitHandlers.set(t,p)})}showProtectModal(t,r,l){return e(this,null,function*(){var c;if(!this.config)return;const a=t.querySelector("[data-reqcheck-email-field]"),u=(null==a?void 0:a.value)||"",p=x(e=>{var n,o,i,s,l,c;document.body.removeChild(p),e&&(e.passed?(f(t),this.protectedElements.delete(t),m(this.config.companyId,r,u.toLowerCase(),!0,e.score),u&&d(this.config.companyId,r,u),null==(o=(n=this.callbacks).onSuccess)||o.call(n,e)):null==(s=(i=this.callbacks).onFailure)||s.call(i,e),null==(c=(l=this.callbacks).onComplete)||c.call(l,e))},this.widgetStyles||void 0,null==(c=this.config)?void 0:c.testMode);document.body.appendChild(p);const h=p.querySelector(".reqcheck-modal-content");v(h,c=>e(this,null,function*(){var a,d,m,y,b,x,v,w,k,E,T;try{const q=yield s(this.config.companyId,r,c);if("passed"===q.status)return document.body.removeChild(p),f(t),this.protectedElements.delete(t),void(null==(m=(d=this.callbacks).onSuccess)||m.call(d,{passed:!0,score:(null==(a=q.attempt)?void 0:a.score)||0}));const $=(null==(b=(yield n(this.config.companyId,r,null==(y=this.config)?void 0:y.testMode)).config)?void 0:b.passThreshold)||70;if("failed"===q.status||"abandoned"===q.status){const e=(null==(x=q.attempt)?void 0:x.score)||0;g(t,e,$,q.timeRemaining,this.widgetStyles||void 0,null==(v=this.config)||v.testMode),h.innerHTML="";const n=document.createElement("div");n.style.cssText="padding: 3rem 2rem; text-align: center;";const o=document.createElement("h2");o.textContent="Verification Failed",o.style.cssText="\n            margin: 0 0 1rem 0;\n            font-size: 1.75rem;\n            font-weight: 600;\n            color: #dc2626;\n          ";const i=document.createElement("p"),r=q.timeRemaining;i.textContent=r?`You can try again in ${r} hour${1!==r?"s":""}.`:"You can try again in 24 hours.",i.style.cssText="\n            margin: 0 0 2rem 0;\n            color: #6b7280;\n            font-size: 1rem;\n          ";const s=document.createElement("button");return s.textContent="Close",s.style.cssText="\n            padding: 0.75rem 1.5rem;\n            background: #000000;\n            color: white;\n            border: none;\n            border-radius: 6px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n          ",s.onclick=()=>{document.body.removeChild(p)},n.appendChild(o),n.appendChild(i),n.appendChild(s),void h.appendChild(n)}const S=void 0!==l?l:null==(w=this.config)?void 0:w.testMode,I=yield i(this.config.companyId,r,c,S);let M=[],z=0,A=[];if(I.resumed&&"in_progress"===q.status){const e=null==(k=q.attempt)?void 0:k.questionsShown;if(Array.isArray(e)&&e.length>0)M=e,A=((null==(E=q.attempt)?void 0:E.answers)||[]).filter(e=>null!=e).map(e=>({questionId:e.questionId,answer:e.answer})),z=q.firstUnansweredIndex||0;else if(I.questions&&I.questions.length>0)M=I.questions;else{M=(yield o(this.config.companyId,r,c)).questions}}else if(I.questions&&I.questions.length>0)M=I.questions;else{M=(yield o(this.config.companyId,r,c)).questions}if(!Array.isArray(M)||0===M.length)return alert("No questions available"),void document.body.removeChild(p);C(h,M,$,I.sessionToken,I.attemptId,z,A,n=>e(this,null,function*(){var e,o,i,l,c,a,d;if(document.body.removeChild(p),n.passed)f(t),this.protectedElements.delete(t),null==(o=(e=this.callbacks).onSuccess)||o.call(e,n);else{let e=null;if(u)try{e=(yield s(this.config.companyId,r,u)).timeRemaining}catch(m){}g(t,n.score,$,e,this.widgetStyles||void 0,null==(i=this.config)||i.testMode),null==(c=(l=this.callbacks).onFailure)||c.call(l,n)}null==(d=(a=this.callbacks).onComplete)||d.call(a,n)}),0,this.widgetStyles||void 0,null==(T=this.config)?void 0:T.testMode)}catch(q){alert(`Error: ${q.message||"Failed to start verification"}`),document.body.removeChild(p)}}),this.widgetStyles||void 0)})}attachToInlineElement(t,n){return e(this,null,function*(){if(!this.config)return void(t.innerHTML='\n        <div style="padding: 2rem; text-align: center; color: #6b7280;">\n          <p>Verification is currently unavailable.</p>\n        </div>\n      ');if(!n)return void(t.innerHTML='\n        <div style="padding: 2rem; text-align: center; color: #6b7280;">\n          <p>Verification is currently unavailable.</p>\n        </div>\n      ');if(!(yield this.validateJob(n)).canRender)return void(t.innerHTML='\n        <div style="padding: 2rem; text-align: center; color: #6b7280;">\n          <p>Verification is currently unavailable.</p>\n        </div>\n      ');const e=a(this.config.companyId,n);let o=!1;if(e)try{o="in_progress"===(yield s(this.config.companyId,n,e)).status}catch(i){}this.renderInlineWidget(t,n,o),t.__reqcheckJobId=n})}renderInlineWidget(e,t,n=!1){var o;e.innerHTML="";const i=this.getStyle("buttonColor","#000000"),r=this.getStyle("buttonTextColor","white");if(e.style.cssText=`\n      padding: 2rem;\n      background: ${this.getStyle("backgroundColor","white")};\n      border: 2px solid #e5e7eb;\n      border-radius: 8px;\n      text-align: center;\n      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);\n      position: relative;\n    `,null==(o=this.config)?void 0:o.testMode){const t=document.createElement("div");t.textContent="TEST MODE",t.style.cssText="\n        position: absolute;\n        top: -30px;\n        left: 50%;\n        transform: translateX(-50%);\n        background: #f59e0b;\n        color: white;\n        padding: 0.375rem 1.5rem;\n        border-top-left-radius: 8px;\n        border-top-right-radius: 8px;\n        font-size: 0.75rem;\n        font-weight: 600;\n        text-transform: uppercase;\n        letter-spacing: 0.05em;\n        z-index: 1;\n        box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.15);\n        white-space: nowrap;\n      ",e.appendChild(t)}const s=document.createElement("h3");s.textContent="Verification Required",s.style.cssText=`\n      margin: 0 0 1rem 0;\n      font-size: 1.5rem;\n      font-weight: 600;\n      color: ${this.getStyle("fontColor","#1f2937")};\n    `;const l=document.createElement("p");l.textContent=n?"Required: Continue your verification to be considered for this position.":"Required: Complete reqCHECK verification to be considered for this position.",l.style.cssText=`\n      margin: 0 0 1.5rem 0;\n      color: ${this.getStyle("fontColor","#6b7280")};\n      opacity: 0.8;\n      font-size: 0.875rem;\n    `;const c=document.createElement("button");c.textContent=n?"Continue Verification":"Start Verification",c.style.cssText=`\n      padding: 0.75rem 1.5rem;\n      background: ${i};\n      color: ${r};\n      border: none;\n      border-radius: 6px;\n      font-size: 1rem;\n      font-weight: 500;\n      cursor: pointer;\n      transition: background 0.2s;\n    `,c.onmouseenter=()=>{c.style.background="#000000"===i?"#1f2937":i},c.onmouseleave=()=>{c.style.background=i},c.onclick=n=>{n.preventDefault(),n.stopPropagation(),this.showInlineModal(e,t)},e.appendChild(s),e.appendChild(l),e.appendChild(c)}updateInlineWidgetWithResult(e,t,n){var o;e.innerHTML="";const i=this.getStyle("accentColor","#000000"),r=t?i:"#dc2626",s="#dc2626",l=t?"#f0fdf4":"#fef2f2",c=t?"#86efac":"#fca5a5";if(e.style.cssText=`\n      padding: 2rem;\n      background: ${t?l:"#fef2f2"};\n      border: 2px solid ${t?c:"#fca5a5"};\n      border-radius: 8px;\n      text-align: center;\n      position: relative;\n    `,null==(o=this.config)?void 0:o.testMode){const t=document.createElement("div");t.textContent="TEST MODE",t.style.cssText="\n        position: absolute;\n        top: -30px;\n        left: 50%;\n        transform: translateX(-50%);\n        background: #f59e0b;\n        color: white;\n        padding: 0.375rem 1.5rem;\n        border-top-left-radius: 8px;\n        border-top-right-radius: 8px;\n        font-size: 0.75rem;\n        font-weight: 600;\n        text-transform: uppercase;\n        letter-spacing: 0.05em;\n        z-index: 1;\n        box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.15);\n        white-space: nowrap;\n      ",e.appendChild(t)}const a=document.createElement("div");a.textContent=t?"✓":"✗",a.style.cssText=`\n      font-size: 3rem;\n      margin-bottom: 1rem;\n      color: ${t?r:s};\n    `;const d=document.createElement("h3");d.textContent=t?"Verification Passed!":"Verification Failed",d.style.cssText=`\n      margin: 0 0 0.5rem 0;\n      font-size: 1.5rem;\n      font-weight: 600;\n      color: ${t?r:s};\n    `;const u=document.createElement("p");u.textContent=`Score: ${n}%`,u.style.cssText=`\n      margin: 0 0 1rem 0;\n      color: ${this.getStyle("fontColor","#6b7280")};\n      opacity: 0.8;\n      font-size: 0.875rem;\n    `;const m=document.createElement("p");m.textContent=t?"You have successfully completed verification.":"You can try again in 24 hours.",m.style.cssText=`\n      margin: 0;\n      color: ${this.getStyle("fontColor","#6b7280")};\n      opacity: 0.8;\n      font-size: 0.875rem;\n    `,e.appendChild(a),e.appendChild(d),t||e.appendChild(u),e.appendChild(m)}showInlineModal(t,r){return e(this,null,function*(){var l;if(!this.config)return;let c="",a=null;const u=e=>{var n,o,i,s,l,a;document.body.removeChild(p),e&&(e.passed?(c&&m(this.config.companyId,r,c.toLowerCase(),!0,e.score),this.updateInlineWidgetWithResult(t,!0,e.score),null==(o=(n=this.callbacks).onSuccess)||o.call(n,e)):(c&&m(this.config.companyId,r,c.toLowerCase(),!1,e.score),this.updateInlineWidgetWithResult(t,!1,e.score),null==(s=(i=this.callbacks).onFailure)||s.call(i,e)),null==(a=(l=this.callbacks).onComplete)||a.call(l,e))},p=x(u,this.widgetStyles||void 0,null==(l=this.config)?void 0:l.testMode);a=u,document.body.appendChild(p);const h=p.querySelector(".reqcheck-modal-content");v(h,l=>e(this,null,function*(){var e,u,f,g,y,b,x,v,w,k,E,T,q,$;c=l,d(this.config.companyId,r,l);try{const c=yield s(this.config.companyId,r,l);if("passed"===c.status)return document.body.removeChild(p),m(this.config.companyId,r,l.toLowerCase(),!0,(null==(e=c.attempt)?void 0:e.score)||0),this.updateInlineWidgetWithResult(t,!0,(null==(u=c.attempt)?void 0:u.score)||0),void(null==(y=(g=this.callbacks).onSuccess)||y.call(g,{passed:!0,score:(null==(f=c.attempt)?void 0:f.score)||0}));if("failed"===c.status||"abandoned"===c.status){h.innerHTML="";const e=document.createElement("div");e.style.cssText="padding: 3rem 2rem; text-align: center;";const n=document.createElement("h2");n.textContent="Verification Failed",n.style.cssText="\n            margin: 0 0 1rem 0;\n            font-size: 1.75rem;\n            font-weight: 600;\n            color: #dc2626;\n          ";const o=document.createElement("p"),i=c.timeRemaining;o.textContent=i?`You can try again in ${i} hour${1!==i?"s":""}.`:"You can try again in 24 hours.",o.style.cssText="\n            margin: 0 0 2rem 0;\n            color: #6b7280;\n            font-size: 1rem;\n          ";const r=document.createElement("button");return r.textContent="Close",r.style.cssText="\n            padding: 0.75rem 1.5rem;\n            background: #000000;\n            color: white;\n            border: none;\n            border-radius: 6px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n          ",r.onclick=()=>{var e;document.body.removeChild(p),this.updateInlineWidgetWithResult(t,!1,(null==(e=c.attempt)?void 0:e.score)||0)},e.appendChild(n),e.appendChild(o),e.appendChild(r),h.appendChild(e),void(null==(v=(x=this.callbacks).onFailure)||v.call(x,{passed:!1,score:(null==(b=c.attempt)?void 0:b.score)||0}))}const d=(null==(k=(yield n(this.config.companyId,r,null==(w=this.config)?void 0:w.testMode)).config)?void 0:k.passThreshold)||70,S=void 0!==testModeOverride?testModeOverride:null==(E=this.config)?void 0:E.testMode,I=yield i(this.config.companyId,r,l,S);let M=[],z=0,A=[];if(I.resumed&&"in_progress"===c.status){const e=null==(T=c.attempt)?void 0:T.questionsShown;if(Array.isArray(e)&&e.length>0)M=e,A=((null==(q=c.attempt)?void 0:q.answers)||[]).filter(e=>null!=e).map(e=>({questionId:e.questionId,answer:e.answer})),z=c.firstUnansweredIndex||0;else if(I.questions&&I.questions.length>0)M=I.questions;else{M=(yield o(this.config.companyId,r,l)).questions}}else if(I.questions&&I.questions.length>0)M=I.questions;else{M=(yield o(this.config.companyId,r,l)).questions}if(!Array.isArray(M)||0===M.length)return alert("No questions available"),void document.body.removeChild(p);C(h,M,d,I.sessionToken,I.attemptId,z,A,e=>{a&&a(e)},0,this.widgetStyles||void 0,null==($=this.config)?void 0:$.testMode)}catch(S){alert(`Error: ${S.message||"Failed to start verification"}`),document.body.removeChild(p)}}),this.widgetStyles||void 0)})}attachToElement(t,n){return e(this,null,function*(){if(!(yield this.validateJob(n)).canRender){const e=this.gateElements.get(t);return void(e&&(t.removeEventListener("click",e),this.gateElements.delete(t)))}const o=this.gateElements.get(t);let i;o&&(t.removeEventListener("click",o),this.gateElements.delete(t)),i=t instanceof HTMLAnchorElement?t.href:t.getAttribute("data-reqcheck-redirect")||void 0;const r=t=>e(this,null,function*(){t.preventDefault(),t.stopPropagation(),yield this.showGateModal(n,i)});t.addEventListener("click",r),this.gateElements.set(t,r)})}verify(t,n,o,i){return e(this,null,function*(){if(!this.config)throw new Error("Widget not initialized");const e=void 0!==i?i:this.config.testMode;if(t&&o)return void(yield this.showGateModal(n,o,e));const r=document.querySelectorAll(`form[data-reqcheck-mode="protect"][data-reqcheck-job="${n}"]`);r.length>0&&(yield this.showProtectModal(r[0],n,e))})}showGateModal(t,r,l){return e(this,null,function*(){var c;if(!this.config)return;let a="",u=null;const p=e=>{var n,o,i,s,l,c;document.body.removeChild(h),e&&(e.passed?(a&&m(this.config.companyId,t,a.toLowerCase(),!0,e.score),null==(o=(n=this.callbacks).onSuccess)||o.call(n,e),r&&(window.location.href=r)):(a&&m(this.config.companyId,t,a.toLowerCase(),!1,e.score),null==(s=(i=this.callbacks).onFailure)||s.call(i,e)),null==(c=(l=this.callbacks).onComplete)||c.call(l,e))},h=x(p,this.widgetStyles||void 0,null==(c=this.config)?void 0:c.testMode);u=p,document.body.appendChild(h);const f=h.querySelector(".reqcheck-modal-content");v(f,c=>e(this,null,function*(){var e,p,g,y,b,x,v,w,k,E,T,q,$;a=c,d(this.config.companyId,t,c);try{const a=yield s(this.config.companyId,t,c);if("passed"===a.status)return document.body.removeChild(h),m(this.config.companyId,t,c.toLowerCase(),!0,(null==(e=a.attempt)?void 0:e.score)||0),null==(y=(g=this.callbacks).onSuccess)||y.call(g,{passed:!0,score:(null==(p=a.attempt)?void 0:p.score)||0}),void(r&&(window.location.href=r));if("failed"===a.status||"abandoned"===a.status){f.innerHTML="";const e=document.createElement("div");e.style.cssText="padding: 3rem 2rem; text-align: center;";const t=document.createElement("h2");t.textContent="Verification Failed",t.style.cssText="\n            margin: 0 0 1rem 0;\n            font-size: 1.75rem;\n            font-weight: 600;\n            color: #dc2626;\n          ";const n=document.createElement("p"),o=a.timeRemaining;n.textContent=o?`You can try again in ${o} hour${1!==o?"s":""}.`:"You can try again in 24 hours.",n.style.cssText="\n            margin: 0 0 2rem 0;\n            color: #6b7280;\n            font-size: 1rem;\n          ";const i=document.createElement("button");return i.textContent="Close",i.style.cssText="\n            padding: 0.75rem 1.5rem;\n            background: #000000;\n            color: white;\n            border: none;\n            border-radius: 6px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n          ",i.onclick=()=>{document.body.removeChild(h)},e.appendChild(t),e.appendChild(n),e.appendChild(i),f.appendChild(e),void(null==(v=(x=this.callbacks).onFailure)||v.call(x,{passed:!1,score:(null==(b=a.attempt)?void 0:b.score)||0}))}const d=(null==(k=(yield n(this.config.companyId,t,null==(w=this.config)?void 0:w.testMode)).config)?void 0:k.passThreshold)||70,S=void 0!==l?l:null==(E=this.config)?void 0:E.testMode,I=yield i(this.config.companyId,t,c,S);let M=[],z=0,A=[];if(I.resumed&&"in_progress"===a.status){const e=null==(T=a.attempt)?void 0:T.questionsShown;if(Array.isArray(e)&&e.length>0)M=e,A=((null==(q=a.attempt)?void 0:q.answers)||[]).filter(e=>null!=e).map(e=>({questionId:e.questionId,answer:e.answer})),z=a.firstUnansweredIndex||0;else if(I.questions&&I.questions.length>0)M=I.questions;else{M=(yield o(this.config.companyId,t,c)).questions}}else if(I.questions&&I.questions.length>0)M=I.questions;else{M=(yield o(this.config.companyId,t,c)).questions}if(!Array.isArray(M)||0===M.length)return alert("No questions available"),void document.body.removeChild(h);C(f,M,d,I.sessionToken,I.attemptId,z,A,e=>{u&&u(e)},0,this.widgetStyles||void 0,null==($=this.config)?void 0:$.testMode)}catch(S){alert(`Error: ${S.message||"Failed to start verification"}`),document.body.removeChild(h)}}),this.widgetStyles||void 0)})}showQuizModal(t,n,o,i){return e(this,null,function*(){return new Promise(e=>{const n=document.createElement("div");n.style.cssText="\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.5);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n      ";const s=document.createElement("div");s.style.cssText="\n        background: white;\n        padding: 2rem;\n        border-radius: 8px;\n        max-width: 600px;\n        width: 90%;\n        max-height: 90vh;\n        overflow-y: auto;\n      ";let l=0;const c=[],a=Date.now(),d=()=>{s.innerHTML="";const u=t[l],m=l+1,p=t.length,h=document.createElement("div");h.innerHTML=`\n          <h2 style="margin: 0 0 1rem 0;">Question ${m} of ${p}</h2>\n          <p style="margin: 0 0 1.5rem 0;">${u.prompt}</p>\n        `,s.appendChild(h);const f=document.createElement("div");if(f.style.marginBottom="1.5rem","multiple_choice"===u.type){(u.config.options||[]).forEach(e=>{const t=document.createElement("label");t.style.cssText="\n              display: block;\n              padding: 0.75rem;\n              margin: 0.5rem 0;\n              border: 1px solid #ddd;\n              border-radius: 4px;\n              cursor: pointer;\n            ";const n=document.createElement("input");n.type="radio",n.name=`question-${u.id}`,n.value=e,t.appendChild(n),t.appendChild(document.createTextNode(` ${e}`)),f.appendChild(t)})}else if("fill_blank_blocks"===u.type){const e=document.createElement("textarea");e.placeholder="Enter your answer...",e.style.cssText="\n            width: 100%;\n            min-height: 100px;\n            padding: 0.5rem;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n          ",f.appendChild(e)}s.appendChild(f);const g=document.createElement("div");if(g.style.cssText="\n          display: flex;\n          justify-content: space-between;\n          margin-top: 1.5rem;\n        ",l>0){const e=document.createElement("button");e.textContent="Previous",e.onclick=()=>{l--,d()},g.appendChild(e)}else g.appendChild(document.createElement("div"));const y=document.createElement("button");y.textContent=l===t.length-1?"Submit":"Next",y.onclick=()=>{let s="";if("multiple_choice"===u.type){const e=document.querySelector(`input[name="question-${u.id}"]:checked`);s=(null==e?void 0:e.value)||""}else if("fill_blank_blocks"===u.type){const e=f.querySelector("textarea");s=(null==e?void 0:e.value)||""}s?(c.push({questionId:u.id,question:u,answer:s}),l<t.length-1?(l++,d()):r(o,i,c,Math.floor((Date.now()-a)/1e3)).then(t=>{document.body.removeChild(n),e({passed:t.passed,score:t.score})}).catch(e=>{alert(`Error submitting: ${e.message}`)})):alert("Please provide an answer")},g.appendChild(y),s.appendChild(g)};d(),n.appendChild(s),document.body.appendChild(n)})})}initElement(t,n){return e(this,null,function*(){if(!this.config)throw new Error("Widget not initialized");const e=t.getAttribute("data-reqcheck-mode"),o=n||t.getAttribute("data-reqcheck-job")||this.config.jobId;o&&("protect"===e&&t instanceof HTMLFormElement?yield this.attachToForm(t,o):"gate"===e?yield this.attachToElement(t,o):"inline"===e&&(yield this.attachToInlineElement(t,o)))})}};if("undefined"!=typeof window){(()=>{const e=document.currentScript;if(e){const t=e.getAttribute("data-reqcheck-company"),n="false"!==e.getAttribute("data-reqcheck-auto-init"),o="true"===e.getAttribute("data-reqcheck-test-mode");t&&w.init({companyId:t,jobId:"",autoInit:n,testMode:o},{})}})(),"loading"===document.readyState&&document.addEventListener("DOMContentLoaded",()=>{w&&"function"==typeof w.rescan&&w.rescan()})}return window.ReqCheck={init:w.init.bind(w),verify:w.verify.bind(w),initElement:w.initElement.bind(w),rescan:w.rescan.bind(w)},w}();
